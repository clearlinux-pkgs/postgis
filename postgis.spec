#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
# Using build pattern: configure
# autospec version: v13
# autospec commit: 2659038
#
%define keepstatic 1
Name     : postgis
Version  : 3.4.2
Release  : 44
URL      : https://download.osgeo.org/postgis/source/postgis-3.4.2.tar.gz
Source0  : https://download.osgeo.org/postgis/source/postgis-3.4.2.tar.gz
Summary  : No detailed summary available
Group    : Development/Tools
License  : Apache-2.0 BSD-1-Clause BSD-3-Clause BSL-1.0 CC-BY-2.5 GPL-2.0 HPND ISC MIT
BuildRequires : ImageMagick
BuildRequires : SFCGAL-dev
BuildRequires : bison
BuildRequires : buildreq-configure
BuildRequires : flex
BuildRequires : gdal-dev
BuildRequires : geos-dev
BuildRequires : grep
BuildRequires : libxslt-bin
BuildRequires : pkgconfig(cunit)
BuildRequires : pkgconfig(json-c)
BuildRequires : pkgconfig(libpcre2-8)
BuildRequires : pkgconfig(libprotobuf-c)
BuildRequires : pkgconfig(libxml-2.0)
BuildRequires : pkgconfig(proj)
BuildRequires : postgresql-dev
BuildRequires : proj-dev
# Suppress stripping binaries
%define __strip /bin/true
%define debug_package %{nil}

%description
PostGIS adds support for geographic objects to the PostgreSQL object-relational
database. In effect, PostGIS "spatially enables" the PostgreSQL server,
allowing it to be used as a backend spatial database for geographic information
systems (GIS), much like ESRI's SDE or Oracle's Spatial extension. PostGIS
follows the OpenGIS "Simple Features Specification for SQL" and has been
certified as compliant with the "Types and Functions" profile.

%prep
%setup -q -n postgis-3.4.2
cd %{_builddir}/postgis-3.4.2

%build
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C.UTF-8
export SOURCE_DATE_EPOCH=1720121309
export GCC_IGNORE_WERROR=1
CLEAR_INTERMEDIATE_CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CLEAR_INTERMEDIATE_FCFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CLEAR_INTERMEDIATE_FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CLEAR_INTERMEDIATE_CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS"
CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS"
FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS"
FCFLAGS="$CLEAR_INTERMEDIATE_FCFLAGS"
ASFLAGS="$CLEAR_INTERMEDIATE_ASFLAGS"
LDFLAGS="$CLEAR_INTERMEDIATE_LDFLAGS"
export GOAMD64=v2
%configure
make  %{?_smp_mflags}

%install
export GCC_IGNORE_WERROR=1
CLEAR_INTERMEDIATE_CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CLEAR_INTERMEDIATE_FCFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CLEAR_INTERMEDIATE_FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CLEAR_INTERMEDIATE_CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS -fdebug-types-section -femit-struct-debug-baseonly -fno-lto -g1 -gno-column-info -gno-variable-location-views -gz=zstd "
CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS"
CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS"
FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS"
FCFLAGS="$CLEAR_INTERMEDIATE_FCFLAGS"
ASFLAGS="$CLEAR_INTERMEDIATE_ASFLAGS"
LDFLAGS="$CLEAR_INTERMEDIATE_LDFLAGS"
export SOURCE_DATE_EPOCH=1720121309
rm -rf %{buildroot}
mkdir -p %{buildroot}/usr/share/package-licenses/postgis
cp %{_builddir}/postgis-%{version}/COPYING %{buildroot}/usr/share/package-licenses/postgis/4cc77b90af91e615a64ae04893fdffa7939db84c || :
cp %{_builddir}/postgis-%{version}/deps/flatgeobuf/include/flatbuffers/LICENSE %{buildroot}/usr/share/package-licenses/postgis/abb8eb20f7f319cd8b292cdccce15826bac01363 || :
cp %{_builddir}/postgis-%{version}/deps/ryu/LICENSE-Apache2 %{buildroot}/usr/share/package-licenses/postgis/7df059597099bb7dcf25d2a9aedfaf4465f72d8d || :
cp %{_builddir}/postgis-%{version}/deps/ryu/LICENSE-Boost %{buildroot}/usr/share/package-licenses/postgis/3cba29011be2b9d59f6204d6fa0a386b1b2dbd90 || :
cp %{_builddir}/postgis-%{version}/deps/uthash/LICENSE %{buildroot}/usr/share/package-licenses/postgis/ed99ab11368da07bba91b30f8289f5efe6175565 || :
cp %{_builddir}/postgis-%{version}/deps/wagyu/LICENSE.geometry %{buildroot}/usr/share/package-licenses/postgis/25c0e2ad5263cedb0cfd7e6aebc2ee2c55735d5d || :
cp %{_builddir}/postgis-%{version}/deps/wagyu/LICENSE.wagyu %{buildroot}/usr/share/package-licenses/postgis/f92a1c30c362beedbe56ef26dbe375917a0b3089 || :
cp %{_builddir}/postgis-%{version}/doc/xsl/LICENSE %{buildroot}/usr/share/package-licenses/postgis/e501a1902bfc6bb496ad5d2fc66e0a758ed03bb0 || :
cp %{_builddir}/postgis-%{version}/extensions/address_standardizer/COPYING %{buildroot}/usr/share/package-licenses/postgis/72a08efb60f0505073eef690c6612036bd7e0697 || :
cp %{_builddir}/postgis-%{version}/extras/tiger_geocoder/COPYING %{buildroot}/usr/share/package-licenses/postgis/dc8f2e570bf431427dbc3bab9d4d551b53a60208 || :
cp %{_builddir}/postgis-%{version}/postgis/geobuf.LICENSE %{buildroot}/usr/share/package-licenses/postgis/05978e722bceaa08bb8055ceb48906cee1a55687 || :
cp %{_builddir}/postgis-%{version}/postgis/vector_tile.LICENSE %{buildroot}/usr/share/package-licenses/postgis/644a450c6de6d9bd6f346b08a5fc35c887a22847 || :
export GOAMD64=v2
GOAMD64=v2
%make_install

%files
%defattr(-,root,root,-)
